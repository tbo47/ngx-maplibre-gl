"use strict";(self.webpackChunkshowcase=self.webpackChunkshowcase||[]).push([[7258],{7258:(T,p,l)=>{l.r(p),l.d(p,{ClusterHtmlComponent:()=>S,ClusterPointComponent:()=>d});var u=l(6814),c=l(8027),t=l(9212);const $=r=>({fill:r});function P(r,h){if(1&r&&(t.O4$(),t._UZ(0,"path",4)),2&r){const i=h.$implicit;t.Q6J("ngStyle",t.VKq(2,$,i.fill)),t.uIk("d",i.d)}}const M=r=>({font:r});function w(r,h){1&r&&t._UZ(0,"showcase-cluster-point",6),2&r&&t.Q6J("properties",h.$implicit.properties)}const O=()=>[.3],b=()=>[0,20],f=()=>["!=","cluster",!0];let d=(()=>{class r{ngOnInit(){const i=[],s=[this.properties.mag1,this.properties.mag2,this.properties.mag3,this.properties.mag4,this.properties.mag5];let e=0;for(let a=0;a<s.length;a++)i.push(e),e+=s[a];this.font=(e>=1e3?22:e>=100?20:e>=10?18:16)+"px sans-serif",this.r=e>=1e3?50:e>=100?32:e>=10?24:18,this.r0=Math.round(.6*this.r),this.w=2*this.r,this.viewbox=`0 0 ${this.w} ${this.w}`,this.textTransform=`translate(${this.r}, ${this.r})`,this.segments=[];for(let a=0;a<s.length;a++)this.segments.push(this.donutSegment(i[a]/e,(i[a]+s[a])/e,o[a]));this.totalString=e.toLocaleString()}donutSegment(i,s,e){s-i==1&&(s-=1e-5);const n=2*Math.PI*(i-.25),a=2*Math.PI*(s-.25),m=Math.cos(n),g=Math.sin(n),_=Math.cos(a),y=Math.sin(a),C=s-i>.5?1:0;return{d:`M ${this.r+this.r0*m} ${this.r+this.r0*g} L ${this.r+this.r*m} ${this.r+this.r*g} A ${this.r} ${this.r} 0 ${C} 1 ${this.r+this.r*_} ${this.r+this.r*y} L ${this.r+this.r0*_} ${this.r+this.r0*y} A ${this.r0} ${this.r0} 0 ${C} 0 ${this.r+this.r0*m} ${this.r+this.r0*g}`,fill:e}}static#t=this.\u0275fac=function(s){return new(s||r)};static#e=this.\u0275cmp=t.Xpm({type:r,selectors:[["showcase-cluster-point"]],inputs:{properties:"properties"},standalone:!0,features:[t.jDz],decls:5,vars:12,consts:[["text-anchor","middle",3,"ngStyle"],[3,"ngStyle",4,"ngFor","ngForOf"],["fill","white"],["dominant-baseline","central"],[3,"ngStyle"]],template:function(s,e){1&s&&(t.O4$(),t.TgZ(0,"svg",0),t.YNc(1,P,1,4,"path",1),t._UZ(2,"circle",2),t.TgZ(3,"text",3),t._uU(4),t.qZA()()),2&s&&(t.Q6J("ngStyle",t.VKq(10,M,e.font)),t.uIk("width",e.w)("height",e.w)("viewbox",e.viewbox),t.xp6(1),t.Q6J("ngForOf",e.segments),t.xp6(1),t.uIk("cx",e.r)("cy",e.r)("r",e.r0),t.xp6(1),t.uIk("transform",e.textTransform),t.xp6(1),t.hij(" ",e.totalString," "))},dependencies:[u.PC,u.ax],encapsulation:2})}return r})();const o=["#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c"];let S=(()=>{class r{constructor(){const i=["<",["get","mag"],2],s=["all",[">=",["get","mag"],2],["<",["get","mag"],3]],e=["all",[">=",["get","mag"],3],["<",["get","mag"],4]],n=["all",[">=",["get","mag"],4],["<",["get","mag"],5]];this.clusterProperties={mag1:["+",["case",i,1,0]],mag2:["+",["case",s,1,0]],mag3:["+",["case",e,1,0]],mag4:["+",["case",n,1,0]],mag5:["+",["case",[">=",["get","mag"],5],1,0]]},this.circlePaint={"circle-color":["case",i,o[0],s,o[1],e,o[2],n,o[3],o[4]],"circle-opacity":.6,"circle-radius":12},this.labelLayout={"text-field":["number-format",["get","mag"],{"min-fraction-digits":1,"max-fraction-digits":1}],"text-font":["Open Sans Semibold","Arial Unicode MS Bold"],"text-size":10},this.labelPaint={"text-color":["case",["<",["get","mag"],3],"black","white"]}}static#t=this.\u0275fac=function(s){return new(s||r)};static#e=this.\u0275cmp=t.Xpm({type:r,selectors:[["showcase-demo"]],standalone:!0,features:[t.jDz],decls:6,vars:17,consts:[[3,"zoom","center","preserveDrawingBuffer"],["id","earthquakes","data","https://maplibre.org/maplibre-gl-js/docs/assets/earthquakes.geojson",3,"cluster","clusterRadius","clusterProperties"],["source","earthquakes"],["mglClusterPoint",""],["id","earthquake_circle","type","circle","source","earthquakes",3,"filter","paint"],["id","earthquake_label","type","symbol","source","earthquakes",3,"filter","layout","paint"],[3,"properties"]],template:function(s,e){1&s&&(t.TgZ(0,"mgl-map",0),t._UZ(1,"mgl-geojson-source",1),t.TgZ(2,"mgl-markers-for-clusters",2),t.YNc(3,w,1,1,"ng-template",3),t.qZA(),t._UZ(4,"mgl-layer",4)(5,"mgl-layer",5),t.qZA()),2&s&&(t.Akn("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),t.Q6J("zoom",t.DdM(13,O))("center",t.DdM(14,b))("preserveDrawingBuffer",!0),t.xp6(1),t.Q6J("cluster",!0)("clusterRadius",80)("clusterProperties",e.clusterProperties),t.xp6(3),t.Q6J("filter",t.DdM(15,f))("paint",e.circlePaint),t.xp6(1),t.Q6J("filter",t.DdM(16,f))("layout",e.labelLayout)("paint",e.labelPaint))},dependencies:[c.Gd,c.E2,c.Ed,c.oF,d,c.TT],styles:["[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}"]})}return r})()}}]);