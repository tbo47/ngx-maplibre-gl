import{i as q,m as D,n as I,q as z,r as B}from"./chunk-SSRDN3DC.js";import{Ab as f,Bb as c,Qb as L,Sb as O,Wa as n,Xb as $,Yb as h,Zb as b,ha as S,nb as P,ob as m,pb as o,ra as v,sb as _,wb as k,xb as F,yb as x,yc as T,zb as u}from"./chunk-QWK6OLOI.js";import"./chunk-ZQQCSEKW.js";var j=i=>({font:i}),A=i=>({fill:i});function G(i,r){if(i&1&&(v(),c(0,"path",1)),i&2){let g=r.$implicit;o("ngStyle",b(2,A,g.fill)),m("d",g.d)}}var R=()=>[.3],U=()=>[0,20],E=()=>["!=","cluster",!0];function N(i,r){if(i&1&&c(0,"showcase-cluster-point",6),i&2){let g=r.$implicit;o("properties",g.properties)}}var H=(()=>{let r=class r{ngOnInit(){let a=[],t=[this.properties.mag1,this.properties.mag2,this.properties.mag3,this.properties.mag4,this.properties.mag5],e=0;for(let s=0;s<t.length;s++)a.push(e),e+=t[s];let l=e>=1e3?22:e>=100?20:e>=10?18:16;this.font=`${l}px sans-serif`,this.r=e>=1e3?50:e>=100?32:e>=10?24:18,this.r0=Math.round(this.r*.6),this.w=this.r*2,this.viewbox=`0 0 ${this.w} ${this.w}`,this.textTransform=`translate(${this.r}, ${this.r})`,this.segments=[];for(let s=0;s<t.length;s++)this.segments.push(this.donutSegment(a[s]/e,(a[s]+t[s])/e,p[s]));this.totalString=e.toLocaleString()}donutSegment(a,t,e){t-a===1&&(t-=1e-5);let l=2*Math.PI*(a-.25),s=2*Math.PI*(t-.25),d=Math.cos(l),y=Math.sin(l),w=Math.cos(s),M=Math.sin(s),C=t-a>.5?1:0;return{d:`M ${this.r+this.r0*d} ${this.r+this.r0*y} L ${this.r+this.r*d} ${this.r+this.r*y} A ${this.r} ${this.r} 0 ${C} 1 ${this.r+this.r*w} ${this.r+this.r*M} L ${this.r+this.r0*w} ${this.r+this.r0*M} A ${this.r0} ${this.r0} 0 ${C} 0 ${this.r+this.r0*d} ${this.r+this.r0*y}`,fill:e}}};r.\u0275fac=function(t){return new(t||r)},r.\u0275cmp=S({type:r,selectors:[["showcase-cluster-point"]],inputs:{properties:"properties"},standalone:!0,features:[$],decls:6,vars:11,consts:[["text-anchor","middle",3,"ngStyle"],[3,"ngStyle"],["fill","white"],["dominant-baseline","central"]],template:function(t,e){t&1&&(v(),u(0,"svg",0),F(1,G,1,4,":svg:path",1,k),c(3,"circle",2),u(4,"text",3),L(5),f()()),t&2&&(o("ngStyle",b(9,j,e.font)),m("width",e.w)("height",e.w)("viewbox",e.viewbox),n(),x(e.segments),n(2),m("cx",e.r)("cy",e.r)("r",e.r0),n(),m("transform",e.textTransform),n(),O(" ",e.totalString," "))},dependencies:[T],encapsulation:2});let i=r;return i})(),p=["#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c"],K=(()=>{let r=class r{constructor(){let a=["<",["get","mag"],2],t=["all",[">=",["get","mag"],2],["<",["get","mag"],3]],e=["all",[">=",["get","mag"],3],["<",["get","mag"],4]],l=["all",[">=",["get","mag"],4],["<",["get","mag"],5]],s=[">=",["get","mag"],5];this.clusterProperties={mag1:["+",["case",a,1,0]],mag2:["+",["case",t,1,0]],mag3:["+",["case",e,1,0]],mag4:["+",["case",l,1,0]],mag5:["+",["case",s,1,0]]},this.circlePaint={"circle-color":["case",a,p[0],t,p[1],e,p[2],l,p[3],p[4]],"circle-opacity":.6,"circle-radius":12},this.labelLayout={"text-field":["number-format",["get","mag"],{"min-fraction-digits":1,"max-fraction-digits":1}],"text-font":["Open Sans Semibold","Arial Unicode MS Bold"],"text-size":10},this.labelPaint={"text-color":["case",["<",["get","mag"],3],"black","white"]}}};r.\u0275fac=function(t){return new(t||r)},r.\u0275cmp=S({type:r,selectors:[["showcase-demo"]],standalone:!0,features:[$],decls:6,vars:17,consts:[[3,"zoom","center","preserveDrawingBuffer"],["id","earthquakes","data","https://maplibre.org/maplibre-gl-js/docs/assets/earthquakes.geojson",3,"cluster","clusterRadius","clusterProperties"],["source","earthquakes"],["mglClusterPoint",""],["id","earthquake_circle","type","circle","source","earthquakes",3,"filter","paint"],["id","earthquake_label","type","symbol","source","earthquakes",3,"filter","layout","paint"],[3,"properties"]],template:function(t,e){t&1&&(u(0,"mgl-map",0),c(1,"mgl-geojson-source",1),u(2,"mgl-markers-for-clusters",2),P(3,N,1,1,"ng-template",3),f(),c(4,"mgl-layer",4)(5,"mgl-layer",5),f()),t&2&&(_("https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"),o("zoom",h(13,R))("center",h(14,U))("preserveDrawingBuffer",!0),n(),o("cluster",!0)("clusterRadius",80)("clusterProperties",e.clusterProperties),n(3),o("filter",h(15,E))("paint",e.circlePaint),n(),o("filter",h(16,E))("layout",e.labelLayout)("paint",e.labelPaint))},dependencies:[I,q,B,z,H,D],styles:[`[_nghost-%COMP%]{display:flex;flex:1}mgl-map[_ngcontent-%COMP%]{height:100%;width:100%}
/*# sourceMappingURL=examples-UPBTEGPO.css.map */`]});let i=r;return i})();export{K as ClusterHtmlComponent,H as ClusterPointComponent};
//# sourceMappingURL=chunk-E5A4YQGU.js.map
